version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Starting Flutter Web Build for AGENDEMAIS"
        - flutter doctor
        - flutter clean
        - flutter pub get
    build:
      commands:
        - echo "Building Flutter Web with production optimizations"
        - flutter build web --release --tree-shake-icons --web-renderer html --dart-define=FLUTTER_WEB_USE_SKIA=false
    postBuild:
      commands:
        - echo "Build completed successfully"
  artifacts:
    baseDirectory: build/web
    files:
      - '**/*'
  cache:
    paths:
      - .dart_tool/**/*
      - /root/.pub-cache/**/*